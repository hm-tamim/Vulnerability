<?php

include 'header.php';

?>

    <div class="content">

        <div class="single-line add-form"">
            <div class="">
                <div class="brd c-left">
                    <p>Add Villages</p> <br>
                    <form action="" method="post">
                        <div class="select-holder">
                            <select id="locality-dropdown" name="district">
                            </select>
                            <select id="upazila" name="upazila">
                            </select>
                            <select id="union" name="union">
                            </select>
                        </div>

                        <input name="title" type="text" placeholder="Enter village name"/>
                        <input type="submit" name="add-village" value="Add"/>
                    </form>
                </div>
            </div>
        </div>





    <div class="single-line mt20">
    <div class="">
        <div class="brd c-left">
            <p>List of Villages</p> <br>


        </div>
    </div>
    </div>


<script>

    let dropdown1 = $('#locality-dropdown');

    dropdown1.empty();

    dropdown1.append('<option selected="true" disabled>Choose districts</option>');
    dropdown1.prop('selectedIndex', 0);

    url = '/api/districts.php';

    // Populate dropdown with list of provinces
    $.getJSON(url, function (data) {
        $.each(data, function (key, entry) {
            dropdown1.append($('<option></option>').attr('value', entry.id).text(entry.bn_name));
        })
    });




    dropdown1.change(function(){

        var selected = $(this).children("option:selected").val();




        let dropdown2 = $('#upazila');

        dropdown2.empty();

        dropdown2.removeAttr('disabled');

        dropdown2.append('<option selected="true" disabled>Choose upazila</option>');
        dropdown2.prop('selectedIndex', 0);

        url = '/api/upazilas.php?district='+selected;

        // Populate dropdown with list of provinces
        $.getJSON(url, function (data) {
            $.each(data, function (key, entry) {
                dropdown2.append($('<option></option>').attr('value', entry.id).text(entry.bn_name));
            })
        });



        dropdown2.change(function(){

            var selected2 = $(this).children("option:selected").val();

            let dropdown3 = $('#union');
            dropdown3.empty();
            dropdown3.removeAttr('disabled');

            dropdown3.append('<option selected="true" disabled>Choose union</option>');
            dropdown3.prop('selectedIndex', 0);

            url = '/api/unions.php?upazila='+selected2;

            // Populate dropdown with list of provinces
            $.getJSON(url, function (data) {
                $.each(data, function (key, entry) {
                    dropdown3.append($('<option></option>').attr('value', entry.id).text(entry.bn_name));
                })
            });


        });






    });




</script>


    <script>

        let dropdown2 = $('#upazila');
        dropdown2.empty();
        dropdown2.attr('disabled','disabled');
        dropdown2.append('<option selected="true" disabled>Choose upazila</option>');
        dropdown2.prop('selectedIndex', 0);

    </script>


    <script>

        let dropdown3 = $('#union');
        dropdown3.empty();
        dropdown3.attr('disabled','disabled')
        dropdown3.append('<option selected="true" disabled>Choose union</option>');
        dropdown3.prop('selectedIndex', 0);

    </script>




<?php

include 'footer.php';

?>