<?php

include 'header.php';

?>

    <div class="content">

        <div class="single-line add-form"">
        <div class="">
            <div class="brd c-left">
                <p>Add Chairman Account</p> <br>
                <form action="" method="post">
                    <div class="select-holder chairmen">
                        <select id="locality-dropdown" name="district" required>
                        </select>
                        <select id="upazila" name="upazila" required>
                        </select>
                        <select id="union" name="union">
                        </select>
                        <select id="village" name="village" required>
                        </select>
                    </div>

                    <br>

                    <div class="chairmen-input">

                        <div class="ileft">
                            <label for="email">Email address</label>
                            <input name="email" type="text" placeholder="Enter chairman email" required/>
                        </div>

                        <div class="icright">
                            <label for="password">Password</label>
                            <input name="password" type="text" value="<?php echo randomPassword(); ?>" placeholder="Enter a password" required/>
                        </div>
                    </div>

                    <div class="">
                        <input name="title" type="text" placeholder="Enter chairman name" required/>
                        <input type="submit" name="add-village" value="Add" required/>
                    </div>
                </form>
            </div>
        </div>
    </div>





    <div class="single-line mt20">
        <div class="">
            <div class="brd c-left">
                <p>List of Chairmen</p> <br>


            </div>
        </div>
    </div>


    <script>

        let dropdown1 = $('#locality-dropdown');

        dropdown1.empty();

        dropdown1.append('<option selected="true" disabled>Choose districts</option>');
        dropdown1.prop('selectedIndex', 0);

        url = '/api/districts.php';

        // Populate dropdown with list of provinces
        $.getJSON(url, function (data) {
            $.each(data, function (key, entry) {
                dropdown1.append($('<option></option>').attr('value', entry.id).text(entry.bn_name));
            })
        });




        dropdown1.change(function(){

            var selected = $(this).children("option:selected").val();




            let dropdown2 = $('#upazila');

            dropdown2.empty();

            dropdown2.removeAttr('disabled');

            dropdown2.append('<option selected="true" disabled>Choose upazila</option>');
            dropdown2.prop('selectedIndex', 0);

            url = '/api/upazilas.php?district='+selected;

            // Populate dropdown with list of provinces
            $.getJSON(url, function (data) {
                $.each(data, function (key, entry) {
                    dropdown2.append($('<option></option>').attr('value', entry.id).text(entry.bn_name));
                })
            });



            dropdown2.change(function(){

                var selected2 = $(this).children("option:selected").val();

                let dropdown3 = $('#union');
                dropdown3.empty();
                dropdown3.removeAttr('disabled');

                dropdown3.append('<option selected="true" disabled>Choose union</option>');
                dropdown3.prop('selectedIndex', 0);

                url = '/api/unions.php?upazila='+selected2;

                // Populate dropdown with list of provinces
                $.getJSON(url, function (data) {
                    $.each(data, function (key, entry) {
                        dropdown3.append($('<option></option>').attr('value', entry.id).text(entry.bn_name));
                    })
                });


            });






        });




    </script>


    <script>

        let dropdown2 = $('#upazila');
        dropdown2.empty();
        dropdown2.attr('disabled','disabled');
        dropdown2.append('<option selected="true" disabled>Choose upazila</option>');
        dropdown2.prop('selectedIndex', 0);

    </script>


    <script>

        let dropdown3 = $('#union');
        dropdown3.empty();
        dropdown3.attr('disabled','disabled')
        dropdown3.append('<option selected="true" disabled>Choose union</option>');
        dropdown3.prop('selectedIndex', 0);

    </script>


    <script>

        let dropdown4 = $('#village');
        dropdown4.empty();
        dropdown4.append('<option selected="true" disabled>Choose villages</option>');
        dropdown4.prop('selectedIndex', 0);


        url = '/api/villages.php';

        // Populate dropdown with list of provinces
        $.getJSON(url, function (data) {
            $.each(data, function (key, entry) {
                dropdown4.append($('<option></option>').attr('value', entry.id).text(entry.name));
            })
        });

    </script>



<?php

include 'footer.php';

?>